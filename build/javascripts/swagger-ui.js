jQuery(function(a){this.baseUrl="http://localhost:8080/1/swagger/resources.json",this.apiKey="special-key";var b=Spine.Controller.create({proxied:["showApi"],baseUrlList:new Array,init:function(){if(this.supportsLocalStorage()){var b=localStorage.getItem("com.wordnik.swagger.ui.baseUrl"),c=localStorage.getItem("com.wordnik.swagger.ui.apiKey");b&&b.length>0&&a("#input_baseUrl").val(b),c&&c.length>0&&a("#input_apiKey").val(c)}else log("localStorage not supported, user will need to specifiy the api url");a("a#explore").click(this.showApi),this.adaptToScale(),a(window).resize(function(){apiSelectionController.adaptToScale()}),this.handleEnter()},handleEnter:function(){var b=this,c=function(){b.showApi()};a("#input_baseUrl").keydown(function(a){if(a.which!=13)return;c()}),a("#input_apiKey").keydown(function(a){if(a.which!=13)return;c()})},adaptToScale:function(){},slapOn:function(){a("#content_message").show(),a("#resources_container").hide(),this.showApi()},supportsLocalStorage:function(){try{return"localStorage"in window&&window.localStorage!==null}catch(a){return!1}},showApi:function(){var b=jQuery.trim(a("#input_baseUrl").val()),c=jQuery.trim(a("#input_apiKey").val());if(b.length==0)a("#input_baseUrl").wiggle();else{this.supportsLocalStorage()&&(localStorage.setItem("com.wordnik.swagger.ui.apiKey",c),localStorage.setItem("com.wordnik.swagger.ui.baseUrl",b));var d=e.init({baseUrl:b,apiKey:c})}}}),c=Spine.Controller.create({showMessage:function(b){b?(a("#content_message").html(b),a("#content_message").show()):(a("#content_message").html(""),a("#content_message").hide())},clearMessage:function(){this.showMessage()}}),d=c.init(),e=Spine.Controller.create({proxied:["addAll","addOne"],ApiResource:null,init:function(){if(this.baseUrl==null)throw new Error("A baseUrl must be passed to ResourceListController");a("#content_message").hide(),a("#resources_container").hide(),a("#resources").html("");var b=new SwaggerService(this.baseUrl,this.apiKey,function(a){a?d.showMessage(a):d.showMessage("Fetching remote JSON...")});b.init(),this.ApiResource=b.ApiResource(),this.ApiResource.bind("refresh",this.addAll)},addAll:function(){this.ApiResource.each(this.addOne),d.clearMessage(),a("#resources_container").slideDown(function(){setTimeout(function(){Docs.shebang()},400)})},addOne:function(a){f.init({item:a,container:"#resources"})}}),f=Spine.Controller.create({proxied:["renderApi","renderOperation"],templateName:"#resourceTemplate",apiResource:null,apiList:null,modelList:null,init:function(){this.render(),this.apiResource=this.item,this.apiList=this.apiResource.apiList,this.modelList=this.apiResource.modelList,this.apiList.each(this.renderApi)},render:function(){a(this.templateName).tmpl(this.item).appendTo(this.container),a("#colophon").fadeIn()},renderApi:function(a){var b="#"+this.apiResource.name+"_endpoint_list";g.init({item:a,container:b})}}),g=Spine.Controller.create({proxied:["renderOperation"],api:null,templateName:"#apiTemplate",init:function(){this.render(),this.api=this.item,this.api.operations.each(this.renderOperation)},render:function(){a(this.templateName).tmpl(this.item).appendTo(this.container)},renderOperation:function(a){var b="#"+this.api.name+"_endpoint_operations";i.init({item:a,container:b})}}),h=Spine.Model.setup("Param",["name","defaultValue","description","required","dataType","allowableValues","paramType","allowMultiple","readOnly"]);h.include({cleanup:function(){this.defaultValue=this.defaultValue||""},templateName:function(){var a="#paramTemplate";return this.allowableValues&&this.allowableValues.valueType=="LIST"?a+="Select":(this.required&&(a+="Required"),this.readOnly&&(a+="ReadOnly")),a}});var i=Spine.Controller.create({proxied:["submitOperation","showResponse","showErrorStatus","showCompleteStatus"],operation:null,templateName:"#operationTemplate",elementScope:"#operationTemplate",init:function(){this.render(),this.operation=this.item,this.isGetOperation=this.operation.httpMethodLowercase=="get",this.elementScope="#"+this.operation.apiName+"_"+this.operation.nickname+"_"+this.operation.httpMethod,this.renderParams()},render:function(){a(this.templateName).tmpl(this.item).appendTo(this.container)},renderParams:function(){if(this.operation.parameters&&this.operation.parameters.count()>0){var b=this.elementScope+"_params";for(var c=0;c<this.operation.parameters.count();c++){var d=h.init(this.operation.parameters.all()[c]);d.cleanup(),a(d.templateName()).tmpl(d).appendTo(b)}}var e=this.elementScope+"_content_sandbox_response_button";a(e).click(this.submitOperation)},submitOperation:function(){var b=a(this.elementScope+"_form"),c=!0,d=null;b.find("input.required").each(function(){a(this).removeClass("error"),a(this).val()==""&&(d==null&&(d=a(this)),a(this).addClass("error"),a(this).wiggle(),c=!1)});if(c){var e=this.operation.invocationData(b.serializeArray());a(".request_url",this.elementScope+"_content_sandbox_response").html("<pre>"+e.url+"</pre>"),a.ajax({url:e.url,dataType:"json",data:e.queryParams,success:this.showResponse,type:this.operation.httpMethod.toUpperCase()}).complete(this.showCompleteStatus).error(this.showErrorStatus)}},showResponse:function(b){var c=JSON.stringify(b,null,"	").replace(/\n/g,"<br>");a(".response_body",this.elementScope+"_content_sandbox_response").html(c),a(this.elementScope+"_content_sandbox_response").slideDown()},showErrorStatus:function(b){this.showStatus(b),a(this.elementScope+"_content_sandbox_response").slideDown()},showCompleteStatus:function(a){this.showStatus(a)},showStatus:function(b){var c="<pre>"+JSON.stringify(JSON.parse(b.responseText),null,2).replace(/\n/g,"<br>")+"</pre>";a(".response_code",this.elementScope+"_content_sandbox_response").html("<pre>"+b.status+"</pre>"),a(".response_body",this.elementScope+"_content_sandbox_response").html(c),a(".response_headers",this.elementScope+"_content_sandbox_response").html("<pre>"+b.getAllResponseHeaders()+"</pre>")}});window.apiSelectionController=b.init(),this.baseUrl?window.resourceListController=e.init({baseUrl:this.baseUrl,apiKey:this.apiKey}):apiSelectionController.slapOn()});